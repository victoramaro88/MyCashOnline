<div *ngIf="spinnerBlock">
  <app-spinnerload></app-spinnerload>
</div>

<div class="container-fluid divPrincipal">
  <div class="row divPrincipal">
    <div class="col-12 pt-3">
      <p-messages [(value)]="msgs"></p-messages>
      <h4>Instituição Financeira</h4>
      <br>

      <ng-container *ngIf="instituicoesUsuario.length > 0; else elseTemplate">
        <div>
          <p-table [value]="instituicoesUsuario" [responsive]="true">
            <ng-template pTemplate="caption">
              Instituições Financeiras Cadastradas
            </ng-template>
            <ng-template pTemplate="header" let-columns>
              <tr style="font-size: 13px;" class="text-center">
                <th style="width: 80px;">Imagem</th>
                <th>Descrição</th>
                <th style="width: 75px;">Agência</th>
                <th style="width: 80px;">Conta</th>
                <th style="width: 80px;">Limite</th>
                <th style="width: 80px;">Saldo</th>
                <th style="width: 60px;">Status</th>
                <th>Opções</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-ifu>
              <tr class="text-center" style="font-size: 13px;">
                <td style="width: 80px;"> <span class="ui-column-title">Imagem</span> <img alt="Imagem" [src]="'data:image/png;base64,' + ifu.ifImg" width="33px" style="vertical-align: middle" /></td>
                <td><span class="ui-column-title">Descrição</span> {{ifu.ifDesc}}</td>
                <td style="width: 75px;"> <span class="ui-column-title">Agência</span>{{ifu.ifuNAgen}}</td>
                <td style="width: 80px;"> <span class="ui-column-title">Conta</span> {{ifu.ifuNConta}}</td>
                <td style="width: 80px;"> <span class="ui-column-title">Limite</span> R$ {{ifu.ifuLimit | number: '1.2'}}</td>
                <td style="width: 80px;"> <span class="ui-column-title">Saldo</span> R$ {{ifu.ifuSaldo | number: '1.2'}}</td>
                <td style.color="{{ifu.ifuFlAt ? 'green' : 'red'}}" style="width: 60px;"> <span class="ui-column-title">Status</span> {{ifu.ifuFlAt ? 'Ativa' : 'Inativa'}}</td>
                <td>
                  <div style="display: block;" class="btn-toolbar" role="toolbar" aria-label="Grupo de botões">
                    <span class="ui-column-title">Opções</span>
                    <div class="btn-group btn-group-sm mr-1" role="group" aria-label="Primeiro grupo">
                      <ng-container *ngIf="ifu.ifuFlAt; else elseTemplate">
                        <button (click)="AlteraStatusInstFinUsr(ifu.ifuCodi, !ifu.ifuFlAt)" class="btn btn-outline-danger btn-sm" title="Desativar"><i class="fa fa-times-circle" style="font-size: 15px;"></i></button>
                      </ng-container>
                      <ng-template #elseTemplate>
                        <button (click)="AlteraStatusInstFinUsr(ifu.ifuCodi, !ifu.ifuFlAt)" class="btn btn-outline-success btn-sm" title="Ativar"><i class="fa fa-check-circle" style="font-size: 15px;"></i></button>
                      </ng-template>
                    </div>
                    <div class="btn-group btn-group-sm mr-1" role="group" aria-label="Segundo grupo">
                      <button class="btn btn-outline-secondary btn-sm" title="Editar"><i class="fa fa-edit" style="font-size: 15px;"></i></button>
                    </div>
                  </div>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </ng-container>
      <ng-template #elseTemplate>
        <div class="text-center">
          <br>
          <p>Você ainda não possui nenhuma Instituição Financeira cadastrada.</p>
          <br>
          <button class="btn btn-success btn-lg">Cadastrar</button>
        </div>
      </ng-template>




    </div>
  </div>
</div>
